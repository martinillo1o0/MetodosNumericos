<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="UTF-8">
        <title>Métodos Numéricos</title>

        <!-- Bootstrap CSS -->
        <link 
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
            crossorigin="anonymous"
            >   

        <!-- Bootstrap JS and dependencies -->
        <script 
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous"
        ></script>
    </head>

 <script th:inline="javascript">
    function crearMatriz() {
        var MN = document.getElementById('MN').value;
        var containerA = document.getElementById('MatrixContainer');
        containerA.replaceChildren();
        var containerB = document.getElementById('IndependentContainer');
        containerB.replaceChildren();

        for (let j = 1; j <= MN; j++) {
            // Renglón de la matriz A
            var renglonA = document.createElement('div');
            renglonA.className = "row mb-2";
            containerA.appendChild(renglonA);

            for (let i = 1; i <= MN; i++) {
                var columnaA = document.createElement('div');
                columnaA.className = "col";
                renglonA.appendChild(columnaA);

                var coeficiente = document.createElement('input');
                coeficiente.type = 'text';
                coeficiente.name = 'matrizA[]';
                coeficiente.placeholder = 'a' + j + i;
                coeficiente.className = "form-control";
                columnaA.appendChild(coeficiente);
            }

            // Vector B
            var vectorb = document.createElement('input');
            vectorb.type = 'text';
            vectorb.name = 'vectorB[]';
            vectorb.placeholder = 'b' + j;
            vectorb.className = "form-control mb-2";

            var renglonB = document.createElement('div');
            renglonB.className = "row mb-2";
            containerB.appendChild(renglonB);

            var columnaB = document.createElement('div');
            columnaB.className = "col";
            renglonB.appendChild(columnaB);

            columnaB.appendChild(vectorb);
        }

        var resolver = document.getElementById('resolver');
        if (resolver) resolver.style.display = 'block';
    }
</script>

<body>
<div class="container">
    <nav th:replace="/layout/template :: menu"> </nav>
    <div th:replace="/layout/template :: bannerunit3"></div>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Inicio</a></li>
            <li class="breadcrumb-item"><a href="/unit3/">Sistemas Lineales</a></li>
            <li class="breadcrumb-item active" aria-current="page">Formulario Gauss-Seidel</li>
        </ol>
    </nav>

    <h1>Método Iterativo: Gauss-Seidel</h1>

    <form th:action="@{/unit3/solvegaussseidel}" method="post" th:object="${modelGaussSeidel}">
        <!-- Tamaño del sistema -->
        <div class="row mb-3">
            <div class="col-md-3">
                <label># Dimensión de la Matriz</label>
                <input type="text" class="form-control" id="MN" name="MN">
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <button type="button" class="btn btn-secondary" onclick="crearMatriz()">Crear Matriz</button>
            </div>
        </div>

        <!-- Matriz A y Vector B -->
        <div class="row">
            <div class="col">
                <p>MATRIZ A</p>
                <div id="MatrixContainer"></div>
            </div>
            <div class="col">
                <p>Vector B</p>
                <div id="IndependentContainer"></div>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-12">
                <button type="submit" class="btn btn-primary" id="resolver">Resolver Sistema</button>
            </div>
        </div>
    </form>

    <!-- Resultados -->
    <div th:if="${solveGaussSeidel != null}" class="mt-4">
        <h3>Resultados:</h3>

        <div th:if="${solveGaussSeidel.MN == 2}">
            <p>X1: <span th:text="${solveGaussSeidel.vectorX[0]}"></span></p>
            <p>X2: <span th:text="${solveGaussSeidel.vectorX[1]}"></span></p>
        </div>

        <div th:if="${solveGaussSeidel.MN == 3}">
            <p>X1: <span th:text="${solveGaussSeidel.vectorX[0]}"></span></p>
            <p>X2: <span th:text="${solveGaussSeidel.vectorX[1]}"></span></p>
            <p>X3: <span th:text="${solveGaussSeidel.vectorX[2]}"></span></p>
        </div>

        <div th:if="${solveGaussSeidel.MN == 4}">
            <p>X1: <span th:text="${solveGaussSeidel.vectorX[0]}"></span></p>
            <p>X2: <span th:text="${solveGaussSeidel.vectorX[1]}"></span></p>
            <p>X3: <span th:text="${solveGaussSeidel.vectorX[2]}"></span></p>
            <p>X4: <span th:text="${solveGaussSeidel.vectorX[3]}"></span></p>
        </div>
    </div>

</div>
</body>


</html>